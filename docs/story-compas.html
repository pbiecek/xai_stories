<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Story COMPAS: recidivism reloaded | XAI Stories</title>
  <meta name="description" content="Case studies for eXplainable Artificial Intelligence" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Story COMPAS: recidivism reloaded | XAI Stories" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="Case studies for eXplainable Artificial Intelligence" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Story COMPAS: recidivism reloaded | XAI Stories" />
  
  <meta name="twitter:description" content="Case studies for eXplainable Artificial Intelligence" />
  <meta name="twitter:image" content="images/cover.png" />



<meta name="date" content="2020-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="foreword.html"/>
<link rel="next" href="story-house-sale-prices.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><h3>XAI Stories</h3> Case studies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a>
<ul>
<li class="chapter" data-level="0.1" data-path="foreword.html"><a href="foreword.html#why"><i class="fa fa-check"></i><b>0.1</b> Why?</a></li>
<li class="chapter" data-level="0.2" data-path="foreword.html"><a href="foreword.html#what"><i class="fa fa-check"></i><b>0.2</b> What?</a></li>
<li class="chapter" data-level="0.3" data-path="foreword.html"><a href="foreword.html#how"><i class="fa fa-check"></i><b>0.3</b> How?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="story-compas.html"><a href="story-compas.html"><i class="fa fa-check"></i><b>1</b> Story COMPAS: recidivism reloaded</a>
<ul>
<li class="chapter" data-level="1.1" data-path="story-compas.html"><a href="story-compas.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="story-compas.html"><a href="story-compas.html#previous-work"><i class="fa fa-check"></i><b>1.1.1</b> Previous work</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="story-compas.html"><a href="story-compas.html#models"><i class="fa fa-check"></i><b>1.2</b> Models</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="story-compas.html"><a href="story-compas.html#recidivism"><i class="fa fa-check"></i><b>1.2.1</b> Recidivism</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="story-compas.html"><a href="story-compas.html#explanations"><i class="fa fa-check"></i><b>1.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="story-compas.html"><a href="story-compas.html#model-specific"><i class="fa fa-check"></i><b>1.3.1</b> Model specific</a></li>
<li class="chapter" data-level="1.3.2" data-path="story-compas.html"><a href="story-compas.html#instance-specific"><i class="fa fa-check"></i><b>1.3.2</b> Instance specific</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="story-compas.html"><a href="story-compas.html#summary-and-conclusions"><i class="fa fa-check"></i><b>1.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html"><i class="fa fa-check"></i><b>2</b> Story House Sale Prices: eXplainable predictions for house sale</a>
<ul>
<li class="chapter" data-level="2.1" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#data-preperation"><i class="fa fa-check"></i><b>2.2</b> Data preperation</a></li>
<li class="chapter" data-level="2.3" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#model"><i class="fa fa-check"></i><b>2.3</b> Model</a></li>
<li class="chapter" data-level="2.4" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#explanations-1"><i class="fa fa-check"></i><b>2.4</b> Explanations</a></li>
<li class="chapter" data-level="2.5" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#summary-and-conclusions-1"><i class="fa fa-check"></i><b>2.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html"><i class="fa fa-check"></i><b>3</b> Story hotel booking: eXplainable predictions of booking cancellation and guests coming back</a>
<ul>
<li class="chapter" data-level="3.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#imbalanced-dataset"><i class="fa fa-check"></i><b>3.1.1</b> Imbalanced dataset</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-1"><i class="fa fa-check"></i><b>3.2</b> Model</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-1.-booking-cancellation"><i class="fa fa-check"></i><b>3.2.1</b> Model 1. Booking cancellation</a></li>
<li class="chapter" data-level="3.2.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-2.-repeated-guests"><i class="fa fa-check"></i><b>3.2.2</b> Model 2. Repeated guests</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#explanations-2"><i class="fa fa-check"></i><b>3.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-1.-booking-cancellation-1"><i class="fa fa-check"></i><b>3.3.1</b> Model 1. Booking cancellation</a></li>
<li class="chapter" data-level="3.3.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-2.-repeated-guests-1"><i class="fa fa-check"></i><b>3.3.2</b> Model 2. Repeated guests</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#summary-and-conclusions-2"><i class="fa fa-check"></i><b>3.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html"><i class="fa fa-check"></i><b>4</b> Story Uplift Modelling: eXplaining colon cancer survival rate after treatment</a>
<ul>
<li class="chapter" data-level="4.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#what-is-uplift-modelling"><i class="fa fa-check"></i><b>4.1.1</b> What is Uplift Modelling?</a></li>
<li class="chapter" data-level="4.1.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#dataset-description"><i class="fa fa-check"></i><b>4.1.2</b> Dataset Description</a></li>
<li class="chapter" data-level="4.1.3" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#ideas"><i class="fa fa-check"></i><b>4.1.3</b> Ideas</a></li>
<li class="chapter" data-level="4.1.4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#why-is-it-worth-the-hassle"><i class="fa fa-check"></i><b>4.1.4</b> Why is it worth the hassle?</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#data-preprocessing"><i class="fa fa-check"></i><b>4.2</b> Data Preprocessing</a></li>
<li class="chapter" data-level="4.3" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#model-2"><i class="fa fa-check"></i><b>4.3</b> Model</a></li>
<li class="chapter" data-level="4.4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#explanations-3"><i class="fa fa-check"></i><b>4.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#dataset-level-explainations"><i class="fa fa-check"></i><b>4.4.1</b> Dataset Level Explainations</a></li>
<li class="chapter" data-level="4.4.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#instance-level-explainations"><i class="fa fa-check"></i><b>4.4.2</b> Instance Level Explainations</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#summary-and-conclusions-3"><i class="fa fa-check"></i><b>4.5</b> Summary and Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html"><i class="fa fa-check"></i><b>5</b> Story Meps: eXplainable predictions for healthcare expenditures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-3"><i class="fa fa-check"></i><b>5.2</b> Model</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#data"><i class="fa fa-check"></i><b>5.2.1</b> Data</a></li>
<li class="chapter" data-level="5.2.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-4"><i class="fa fa-check"></i><b>5.2.2</b> Model</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#explanations-4"><i class="fa fa-check"></i><b>5.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-level-explainations"><i class="fa fa-check"></i><b>5.3.1</b> Model Level Explainations</a></li>
<li class="chapter" data-level="5.3.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#instance-level-explainations---business-approach"><i class="fa fa-check"></i><b>5.3.2</b> Instance Level Explainations - business approach</a></li>
<li class="chapter" data-level="5.3.3" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#instance-level-explainations---instance-specific-approach"><i class="fa fa-check"></i><b>5.3.3</b> Instance Level Explainations - instance specific approach</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#summary-and-conclusions-4"><i class="fa fa-check"></i><b>5.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html"><i class="fa fa-check"></i><b>6</b> Story MEPS: Healthcare expenditures of individuals</a>
<ul>
<li class="chapter" data-level="6.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#todos"><i class="fa fa-check"></i><b>6.1</b> TODOS</a></li>
<li class="chapter" data-level="6.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#introduction-5"><i class="fa fa-check"></i><b>6.2</b> Introduction</a></li>
<li class="chapter" data-level="6.3" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#models-1"><i class="fa fa-check"></i><b>6.3</b> Models</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-1-linear"><i class="fa fa-check"></i><b>6.3.1</b> Model 1: Linear</a></li>
<li class="chapter" data-level="6.3.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-2-ann"><i class="fa fa-check"></i><b>6.3.2</b> Model 2: ANN</a></li>
<li class="chapter" data-level="6.3.3" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-3-xgb"><i class="fa fa-check"></i><b>6.3.3</b> Model 3: XGB</a></li>
<li class="chapter" data-level="6.3.4" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#results"><i class="fa fa-check"></i><b>6.3.4</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#explanations-5"><i class="fa fa-check"></i><b>6.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#instance-level-1"><i class="fa fa-check"></i><b>6.4.1</b> Instance level</a></li>
<li class="chapter" data-level="6.4.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#dataset-level-1"><i class="fa fa-check"></i><b>6.4.2</b> Dataset level</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#summary-and-conclusions-5"><i class="fa fa-check"></i><b>6.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="story-lungs.html"><a href="story-lungs.html"><i class="fa fa-check"></i><b>7</b> Story lungs: eXplainable predictions for post operational risks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="story-lungs.html"><a href="story-lungs.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="story-lungs.html"><a href="story-lungs.html#model-5"><i class="fa fa-check"></i><b>7.2</b> Model</a></li>
<li class="chapter" data-level="7.3" data-path="story-lungs.html"><a href="story-lungs.html#explanations-6"><i class="fa fa-check"></i><b>7.3</b> Explanations</a></li>
<li class="chapter" data-level="7.4" data-path="story-lungs.html"><a href="story-lungs.html#summary-and-conclusions-6"><i class="fa fa-check"></i><b>7.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="heloc-credits.html"><a href="heloc-credits.html"><i class="fa fa-check"></i><b>8</b> Heloc credits</a>
<ul>
<li class="chapter" data-level="8.1" data-path="heloc-credits.html"><a href="heloc-credits.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="heloc-credits.html"><a href="heloc-credits.html#dataset"><i class="fa fa-check"></i><b>8.2</b> Dataset</a></li>
<li class="chapter" data-level="8.3" data-path="heloc-credits.html"><a href="heloc-credits.html#model-6"><i class="fa fa-check"></i><b>8.3</b> Model</a></li>
<li class="chapter" data-level="8.4" data-path="heloc-credits.html"><a href="heloc-credits.html#explanations-7"><i class="fa fa-check"></i><b>8.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="heloc-credits.html"><a href="heloc-credits.html#explanation-for-management"><i class="fa fa-check"></i><b>8.4.1</b> Explanation for management</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="heloc-credits.html"><a href="heloc-credits.html#application-for-clients"><i class="fa fa-check"></i><b>8.5</b> Application for clients</a></li>
<li class="chapter" data-level="8.6" data-path="heloc-credits.html"><a href="heloc-credits.html#summary-and-conclusion"><i class="fa fa-check"></i><b>8.6</b> Summary and conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html"><i class="fa fa-check"></i><b>9</b> Story Uplift modeling on marketing dataset: eXplainable predictions for optimized marketing campaigns</a>
<ul>
<li class="chapter" data-level="9.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#introduction-8"><i class="fa fa-check"></i><b>9.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#approaches-towards-uplift-modeling"><i class="fa fa-check"></i><b>9.1.1</b> Approaches towards uplift modeling</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#dataset-1"><i class="fa fa-check"></i><b>9.2</b> Dataset</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#feature-engineering"><i class="fa fa-check"></i><b>9.2.1</b> Feature engineering</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#model-wymaga-dopracowania"><i class="fa fa-check"></i><b>9.3</b> Model [wymaga dopracowania]</a></li>
<li class="chapter" data-level="9.4" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#explanations-wymaga-dopracowania"><i class="fa fa-check"></i><b>9.4</b> Explanations [wymaga dopracowania]</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#individual-perspective"><i class="fa fa-check"></i><b>9.4.1</b> Individual perspective</a></li>
<li class="chapter" data-level="9.4.2" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#data-scientist-perspective"><i class="fa fa-check"></i><b>9.4.2</b> Data scientist perspective</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#summary-and-conclusions-7"><i class="fa fa-check"></i><b>9.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="10" data-path="story-covid19.html"><a href="story-covid19.html"><i class="fa fa-check"></i><b>10</b> Story covid19: eXplainable predictions for mortality</a>
<ul>
<li class="chapter" data-level="10.1" data-path="story-covid19.html"><a href="story-covid19.html#figures-and-citations"><i class="fa fa-check"></i><b>10.1</b> Figures and citations</a></li>
<li class="chapter" data-level="10.2" data-path="story-covid19.html"><a href="story-covid19.html#introduction-9"><i class="fa fa-check"></i><b>10.2</b> Introduction</a></li>
<li class="chapter" data-level="10.3" data-path="story-covid19.html"><a href="story-covid19.html#model-7"><i class="fa fa-check"></i><b>10.3</b> Model</a></li>
<li class="chapter" data-level="10.4" data-path="story-covid19.html"><a href="story-covid19.html#explanations-8"><i class="fa fa-check"></i><b>10.4</b> Explanations</a></li>
<li class="chapter" data-level="10.5" data-path="story-covid19.html"><a href="story-covid19.html#summary-and-conclusions-8"><i class="fa fa-check"></i><b>10.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html"><i class="fa fa-check"></i><b>11</b> Story COMPAS: recidivism reloaded</a>
<ul>
<li class="chapter" data-level="11.1" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#introduction-10"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#model-8"><i class="fa fa-check"></i><b>11.2</b> Model</a></li>
<li class="chapter" data-level="11.3" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#explanations-9"><i class="fa fa-check"></i><b>11.3</b> Explanations</a></li>
<li class="chapter" data-level="11.4" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#summary-and-conclusions-9"><i class="fa fa-check"></i><b>11.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">XAI Stories</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="story-compas" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Story COMPAS: recidivism reloaded</h1>
<p><em>Authors: Łukasz Grad (University of Warsaw), Katarzyna Koprowska (Warsaw University of Technology), Jakub Kozak (SGH Warsaw School of Economics)</em></p>
<p><em>Mentors: Michał Miktus (McKinsey)</em></p>
<div id="introduction" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Introduction</h2>
<p>The study concerns the COMPAS algorithm, which stands for Correctional Offender Management Profiling for Alternative Sanctions, created by a for-profit company Northpointe. COMPAS is a widely popular commercial algorithm used by judges and parole officers for scoring a criminal defendant’s likelihood of recidivism. It was designed to help judges identify potentially more dangerous individuals (those with higher scores) and award them with longer sentences. It is easy to notice that COMPAS results may have very serious consequences for the lives of many people in the United States. yet the algorithm is (because of its proprietary nature) still a black-box for the wide audience – meaning that we cannot easily identify which factors did it take into account when classifying an individual as a person with a high or low likelihood of reoffending.</p>
<p>It is natural that many questions have arised about the fairness of such an algorithm, especially as the fairness required to be defined in advance.</p>
<div id="previous-work" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Previous work</h3>
<p>One of the first and the most known investigators wanting to validate COMPAS results was ProPublica group. They have provoked a vigorous discussion about the fairness of black-box models with their 2016 study, which attempted to reconstruct COMPAS methodology. They have collected criminal records from Broward County FL for several thousand people, as well as reports about their offenses in a two-year follow-up period. The overall accuracy of ProPublica’s reconstructed model was only 61%, but their main discovery was a racial bias in favour of Caucasian defendants over those of African-American origins. According to the study, black defendants were particularly likely to be falsely flagged as future criminals almost twice as often as white ones, who were also more often mislabeled as low risk. The researchers believed that this disparity cannot be explained by either defendant’s prior crimes, type of crimes, gender or age.</p>
<p>The ProPublica study was, however, criticized for its flawed methodology. One of the critics was Northpointe, the creator of the COMPAS algorithm, who defended the accuracy of its test, because the results from ProPublica do not accurately reflect their model.</p>
<p>After ProPublica’s publication, confusion and doubts, whether COMPAS should still be relied on, began to appear among researchers, which led several of them to propose their own validations of the algorithm, based on data provided by ProPublica. One of the most reliable work seems to be the 2019 study “The age of secrecy and unfairness in recidivism prediction” by Rudin et al., which verifies the analysis conducted by ProPublica, indicating cases where the results given by COMPAS may be non-intuitive and possible explanations. The authors believe that ProPublica has drawn conclusions from incorrect assumptions and lack of knowledge of all data: for instance, they assumed linearity in age (as stated in official COMPAS documentation from Northpointe), which appeared to be untrue; they also did not have access to the answers from questionnaires given to defendants (also introduced by the Northpointe as predictors for their model), which can be highly correlated with race and shift the outcome.</p>
<p>Disproving ProPublica’s study was not, however, the main objective of Rudin et al. They described what they believed was the real problem of COMPAS: its proprietary nature, which, along with over a hundred of (manually-entered) variables collected from questionnaires not accessible to anyone but Northpointe, does not allow to identify data entry errors, data integration errors, missing data and other types of inaccuracies. The researchers even identified some individuals with a rich criminal history and low probability of recidivism given by model, highly suggesting that their scores were based on flawed data.
The main conclusion of this analysis was to replace black-box machine learning models by interpretable models, which, as Rudin et al. suggested, can be equally accurate for predicting recidivism.</p>
<p>We believe, however, that we are capable of achieving better accuracy results than the aforementioned researchers and that, thanks to the explainability techniques, a trade-off between accuracy and interpretability is no longer unavoidable.</p>
</div>
</div>
<div id="models" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Models</h2>
<p>Our goal was to predict the recidivism and violent recidivism in a two-year follow-up period. Therefore, we modeled both problems as binary classification tasks.
Data we used for modelling was largely derived from the “The age of unfairness” study dataset combined with several factors extracted from the raw Broward County FL database used by ProPublica for their analysis.</p>
<p>In our model, we analyzed data from 5727 subjects from Broward County FL, whose likelihood of recidivism and violent recidivism
we were trying to predict. We have used both 29 variables:
<strong>personal</strong> (6) including current age, age at first offence, sex, race, marital status, custody status, <strong>criminal involvement</strong> (20) consisting of number and types of previous charges and arrests, as well as those leading to COMPAS screening and <strong>history of non-compliance</strong> (3) concerning behaviour while on probation.</p>
<div id="recidivism" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Recidivism</h3>
<p>In order to find the best model, we have tried different approaches: Extreme Gradient Boosting (XGBoost), LASSO Logistic Regression and Random Forest. We focused on tuning the XGBoost model, as it provides state-of-the-art results on many tabular datasets, and wanted to compare it with a white box logistic regression model along with out-of-the-box Random Forest.</p>
<p>Comparison with a linear model can give us insights on whether the relationships between recidivism and given predictors is highly nonlinear or not. On the other hand, comparison with Random Forest model will reveal how important is careful parameter tuning for this task.</p>
<div id="xgboost" class="section level4" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> XGBoost</h4>
<p>Since the volume of our datasets is not substantial, we performed XGBoost tuning with exhaustive grid search method in a coarse-to-fine manner. With a coarse parameter search we assessed the relative importance of each parameter and narrowed down its potential range of values. Next, with a much finer search we obtained out final sets of parameters. As a metric during parameter tuning we used AUC on the full training set with out-of-fold scores within a 5-fold CV scheme. In our analysis, we used <code>xgboost</code> package in R.</p>
<table style="width:100%;">
<colgroup>
<col width="12%" />
<col width="13%" />
<col width="12%" />
<col width="7%" />
<col width="11%" />
<col width="11%" />
<col width="18%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Model</th>
<th align="center">Tree Number</th>
<th align="center">Max Depth</th>
<th align="center">Eta</th>
<th align="center">Colsample</th>
<th align="center">Subsample</th>
<th align="center">Min Child Weight</th>
<th align="center">Alpha</th>
<th align="center">Lambda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">XGB</td>
<td align="center">12</td>
<td align="center">3</td>
<td align="center">0.3</td>
<td align="center">1</td>
<td align="center">0.8</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">XGB Violent</td>
<td align="center">19</td>
<td align="center">3</td>
<td align="center">0.3</td>
<td align="center">0.8</td>
<td align="center">0.8</td>
<td align="center">10</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p><em>Selected final parameter sets for recidivism and violent recidivism XGBoost models</em></p>
</div>
<div id="lasso-regression" class="section level4" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> LASSO regression</h4>
<p>Since we had strong suspicions about collinearity between predictors, we used Logistic Regression with L1 penalty (LASSO) as our linear model of choice. The penalty term, similarily to XGBoost, was tuned with 5-fold CV on the training set. We utilized a well known <code>glmnet</code> package in R to efficiently find optimal penalty terms using the Lasso path. Final models had <span class="math inline">\(17\)</span> and <span class="math inline">\(28\)</span> non-zero weights, for recidivism and violent recidivism models. Below we present the Lasso path for recidivism model.</p>
<p><img src="images/01-lasso_recid.png" /></p>
<p><em>Lasso path for recidivism model. On top we see the number of non-zero weights. We can see the optimal penalty term chosen close to <span class="math inline">\(e^{-5}\)</span>. Best model had 17 non-zero weights, although models with less than 10 chosen predictors also perform well</em></p>
</div>
<div id="random-forest" class="section level4" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> Random Forest</h4>
<p>As for the Random Forest model, we relied on the default implementation in <code>RandomForest</code> R package, without any finetuning. We set the number of trees to 50, seeing that the chosen XGBoost models were also sparse in tree count.</p>
<p><img src="images/01-roc_recid.png" />
<em>Figure above presents ROC curve for three recidivism classifiers.</em></p>
<p>We decidecied to compare our models using a receiver operating characteristic or ROC curve in short. As it turned out, the most accurate algorithm was XGBoost with AUC of 0.72.</p>
<p><img src="images/01-roc_recid_violent.png" />
<em>Figure above presents ROC curve for three violent recidivism classifiers.</em></p>
<p>We did similar calculations for violent recidivism and again the best results gave us XGBoost. In both cases, ROC AUC was 0.72, which is much more than ProPublika score and also significantly more than COMPAS.</p>
</div>
</div>
</div>
<div id="explanations" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Explanations</h2>
<div id="model-specific" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Model specific</h3>
<p>In order to identify the effect of features on prediction we used Permutation Variable Importance.</p>
<p><img src="images/01-vip_recid.png" /></p>
<p>Not surprisingly, the most relevant variable turned out to be number of previous arrests. Another factor that is greatly affecting prediction is age – younger people tend to be much more likely to commit crime again. It is tightly followed by the number of previous misdemeanors, suggesting that people commiting lesser crimes are more likely to do it again. Last of the important characteristics is the age of first offense, indicating that people whose criminal history begins in their teens are more likely to re-offend.</p>
<p><img src="images/01-vip_recid_violent.png" /></p>
<p>Similarly to recidivism modeling, the number of previous arrests and current age are also the most important factors in predicting violent recidivism. The deciding factor is, however, the number of previous violent charges – people committing violent crimes tend to be more likely to proceed to do it in the future. The impact of the age at first offense is lower comparing to the recidivism model.</p>
<p><img src="images/01-avg_pred_race_sex.png" /></p>
<p>Our model predicted African-Americans to be, on average, more likely to re-offend than individuals of any other race.</p>
</div>
<div id="instance-specific" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Instance specific</h3>
<p>In order to identify, whether it is not caused by other factors correlated with race, we have performed an instance level analysis using Ceteris Paribus on observations with the most accurate predictions.</p>
<p><img src="images/01-cp_pos_corr.png" /></p>
<p><img src="images/01-cp_neg_corr.png" /></p>
<p>Neither is our model – but it has been fitted on real world data full of systematic bias, making it unfair towards African-Americans,as Ceteris Paribus freezes all the other factors.</p>
<p><img src="images/01-cp_compas_recid.png" /></p>
<p>It is very surprising that the COMPAS itself seems to (for some of the subjects) favorite black people over other races, as it can be seen on the picture.</p>
<p>Another question arises whether we do not have a gender bias, because both models - ours and COMPAS - seem to drastically change their predictions for male subjects when controlling for other factors.</p>
<p>In our next steps we would like to investigate other factors affecting predictions and check whether biases other than racial occur as well.</p>
</div>
</div>
<div id="summary-and-conclusions" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Summary and conclusions</h2>
<p>One may ask: what is the big deal? If data shows that certain individuals are more likely to be classified as reoffending, then our models should include that information.</p>
<p>We do not know, however, how existing racial bias influenced the actual data: what if white people were simply less often arrested, had fewer charges and more let go with a warning? This scenario is not so difficult to imagine.</p>
<p>As data scientists it is our social duty to make sure we do not propagate any existing biases and do our best to eliminate them.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="foreword.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="story-house-sale-prices.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/compstat-lmu/iml_methods_limitations/edit/master/01-story-compas.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book.pdf", "book.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
